<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>×‘×“×™×§×ª ××œ××™</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }
        .prize {
            background: #2a2a4e;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #45a049;
        }
        .danger {
            background: #f44336;
        }
        .danger:hover {
            background: #da190b;
        }
    </style>
</head>
<body>
    <h1>ğŸ” ×‘×“×™×§×ª ××œ××™ ×¤×¨×¡×™×</h1>
    <div id="inventory-info"></div>

    <h2>×¤×¢×•×œ×•×ª:</h2>
    <button onclick="showInventory()">ğŸ“Š ×”×¦×’ ××œ××™</button>
    <button onclick="resetInventory()" class="danger">ğŸ”„ ××¤×¡ ××œ××™ (×”×©×‘ ×œ×¨××©×•× ×™)</button>
    <button onclick="clearAll()" class="danger">ğŸ—‘ï¸ × ×§×” ×”×›×œ</button>

    <script>
        function showInventory() {
            const saved = localStorage.getItem('dynamicImages');
            const inventoryInfo = document.getElementById('inventory-info');

            if (!saved) {
                inventoryInfo.innerHTML = '<p>âŒ ××™×Ÿ × ×ª×•× ×™× ×‘-localStorage</p>';
                return;
            }

            const images = JSON.parse(saved);
            let html = '<h3>××œ××™ × ×•×›×—×™:</h3>';

            images.forEach((img, index) => {
                const inventoryDisplay = img.inventory === null ? '××™× ×¡×•×£ â™¾ï¸' : img.inventory;
                const initialDisplay = img.initialInventory === null ? '××™× ×¡×•×£ â™¾ï¸' : img.initialInventory;
                const distributed = img.distributedCount || 0;

                html += `
                    <div class="prize">
                        <h4>${img.prizeName || img.label}</h4>
                        <p><strong>×§×•×“:</strong> ${img.code}</p>
                        <p><strong>××œ××™ × ×•×›×—×™:</strong> ${inventoryDisplay}</p>
                        <p><strong>××œ××™ ×¨××©×•× ×™:</strong> ${initialDisplay}</p>
                        <p><strong>×¡×”"×› ×—×•×œ×§:</strong> ${distributed}</p>
                        <p><strong>symbolIndex:</strong> ${img.symbolIndex}</p>
                    </div>
                `;
            });

            inventoryInfo.innerHTML = html;
        }

        function resetInventory() {
            if (!confirm('×”×× ××ª×” ×‘×˜×•×—? ×–×” ×™×©×—×–×¨ ××ª ×”××œ××™ ×œ××¦×‘ ×”×¨××©×•× ×™')) {
                return;
            }

            const saved = localStorage.getItem('dynamicImages');
            if (!saved) {
                alert('××™×Ÿ × ×ª×•× ×™×');
                return;
            }

            const images = JSON.parse(saved);
            images.forEach(img => {
                // ×”×©×‘ ××œ××™ ×œ××¦×‘ ×¨××©×•× ×™
                img.inventory = img.initialInventory;
                // ××¤×¡ ××•× ×” ×—×œ×•×§×”
                img.distributedCount = 0;
            });

            localStorage.setItem('dynamicImages', JSON.stringify(images));
            alert('âœ… ×”××œ××™ ×©×•×—×–×¨ ×œ××¦×‘ ×”×¨××©×•× ×™!');
            showInventory();
        }

        function clearAll() {
            if (!confirm('×”×× ××ª×” ×‘×˜×•×—? ×–×” ×™××—×§ ××ª ×›×œ ×”× ×ª×•× ×™×!')) {
                return;
            }

            // × ×§×” ××ª ×›×œ ×”× ×ª×•× ×™× ×”×™×©× ×™× ×•×”×—×“×©×™×
            localStorage.removeItem('dynamicImages');
            localStorage.removeItem('inventory');
            localStorage.removeItem('initialInventory');
            localStorage.removeItem('prizeInventory'); // ×™×©×Ÿ - ×œ××—×™×§×”
            localStorage.removeItem('initialPrizeInventory'); // ×™×©×Ÿ - ×œ××—×™×§×”
            alert('âœ… ×›×œ ×”× ×ª×•× ×™× × ××—×§×•!');
            document.getElementById('inventory-info').innerHTML = '<p>âœ… × ×ª×•× ×™× × ××—×§×•. ×¨×¢× ×Ÿ ××ª ×”×“×£ ×”×¨××©×™.</p>';
        }

        // ×”×¦×’ ××œ××™ ××•×˜×•××˜×™×ª ×‘×˜×¢×™× ×”
        showInventory();
    </script>
</body>
</html>
