# Firebase Database Rules - ××“×¨×™×š ×¢×“×›×•×Ÿ ×›×œ×œ×™×

## ××–×”×¨×ª ×‘×™×¦×•×¢×™× ×©×”×ª×§×‘×œ×”

```
@firebase/database: FIREBASE WARNING: Using an unspecified index.
Your data will be downloaded and filtered on the client.
Consider adding ".indexOn": "ownerId" at /events to your security rules
for better performance.
```

## ×¤×ª×¨×•×Ÿ - ×”×•×¡×¤×ª ××™× ×“×§×¡ ×œ-ownerId

### ×©×œ×‘ 1: ×›× ×™×¡×” ×œ-Firebase Console
1. ×¤×ª×— ××ª [Firebase Console](https://console.firebase.google.com)
2. ×‘×—×¨ ××ª ×”×¤×¨×•×™×§×˜: **slotm-c0090**
3. ××ª×¤×¨×™×˜ ×”×¦×“, ×œ×—×¥ ×¢×œ **Realtime Database**

### ×©×œ×‘ 2: ×¢×“×›×•×Ÿ ×›×œ×œ×™ ×”××‘×˜×—×”
1. ×œ×—×¥ ×¢×œ ×”×˜××‘ **Rules** (×›×œ×œ×™×)
2. ×”×•×¡×£ ××ª ×”××™× ×“×§×¡ ×”×‘× ×œ×ª×•×š ×”×›×œ×œ×™× ×”×§×™×™××™×:

```json
{
  "rules": {
    "events": {
      ".indexOn": ["ownerId", "status", "createdAt"],
      "$eventId": {
        ".read": true,
        ".write": true
      }
    },
    "sessions": {
      "$sessionId": {
        ".read": true,
        ".write": true
      }
    },
    "users": {
      "$userId": {
        ".read": true,
        ".write": "auth != null && auth.uid === $userId"
      }
    }
  }
}
```

### ××” ×–×” ×¢×•×©×”?

**`.indexOn`** - ×™×•×¦×¨ ××™× ×“×§×¡ ×¢×œ ×”×©×“×•×ª ×”××¦×•×™× ×™×, ××” ×©××©×¤×¨ ××©××¢×•×ª×™×ª ××ª ×”×‘×™×¦×•×¢×™× ×©×œ ×©××™×œ×ª×•×ª:

- **ownerId** - ×¡×™× ×•×Ÿ ××™×¨×•×¢×™× ×œ×¤×™ ×‘×¢×œ×™× (××©×ª××©)
- **status** - ×¡×™× ×•×Ÿ ××™×¨×•×¢×™× ×œ×¤×™ ×¡×˜×˜×•×¡ (active/closed)
- **createdAt** - ××™×•×Ÿ ×œ×¤×™ ×ª××¨×™×š ×™×¦×™×¨×”

### ×œ×¤× ×™ ×•××—×¨×™

**âŒ ×‘×œ×™ ××™× ×“×§×¡:**
- Firebase ××•×¨×™×“ ××ª **×›×œ** ×”××™×¨×•×¢×™× ×œ×“×¤×“×¤×Ÿ
- ×”×“×¤×“×¤×Ÿ ××¡× ×Ÿ ×•××™×™×Ÿ ××ª ×”× ×ª×•× ×™× (××™×˜×™!)

**âœ… ×¢× ××™× ×“×§×¡:**
- Firebase ××¡× ×Ÿ ×•××™×™×Ÿ **×‘×©×¨×ª**
- ×”×“×¤×“×¤×Ÿ ××§×‘×œ ×¨×§ ××ª ×”× ×ª×•× ×™× ×”×¨×œ×•×•× ×˜×™×™× (××”×™×¨!)

### ×©×œ×‘ 3: ×¤×¨×¡×•× ×”×›×œ×œ×™×
1. ×œ×—×¥ ×¢×œ **Publish** (×¤×¨×¡×)
2. ××™×©×•×¨: "Do you want to publish these rules?"
3. ×œ×—×¥ **Yes**

### ××™××•×ª
××—×¨×™ ×”×¤×¨×¡×•×, ×¨×¢× ×Ÿ ××ª ×”×“×©×‘×•×¨×“ - ×”××–×”×¨×” ×‘×§×•× ×¡×•×œ ×××•×¨×” ×œ×”×™×¢×œ×.

---

## ×›×œ×œ×™× ××•××œ×¦×™× ××œ××™×

```json
{
  "rules": {
    "events": {
      ".indexOn": ["ownerId", "status", "createdAt"],
      "$eventId": {
        ".read": true,
        ".write": "auth != null"
      }
    },
    "sessions": {
      ".indexOn": ["sessionActive", "createdAt"],
      "$sessionId": {
        ".read": true,
        ".write": true,
        "players": {
          "$playerId": {
            ".read": true,
            ".write": true
          }
        },
        "winners": {
          "$winnerId": {
            ".read": true,
            ".write": true
          }
        }
      }
    },
    "users": {
      "$userId": {
        ".read": "auth != null",
        ".write": "auth != null && auth.uid === $userId"
      }
    }
  }
}
```

### ×”×¡×‘×¨ ×¢×œ ×”×›×œ×œ×™×:

#### `events`
- **×§×¨×™××”**: ×›×•×œ× ×™×›×•×œ×™× ×œ×§×¨×•× (×œ××©×—×§ ×•×—×•×•×™×™×ª ×©×—×§× ×™×)
- **×›×ª×™×‘×”**: ×¨×§ ××©×ª××©×™× ××—×•×‘×¨×™×
- **××™× ×“×§×¡×™×**: ownerId, status, createdAt (×œ×“×©×‘×•×¨×“)

#### `sessions`
- **×§×¨×™××”/×›×ª×™×‘×”**: ×¤×ª×•×— (×œ××©×—×§ ×•×–×™×”×•×™ ×‘×–××Ÿ ×××ª)
- **××™× ×“×§×¡×™×**: sessionActive, createdAt (×œ××¢×§×‘ ×¡×˜×˜×•×¡)

#### `users`
- **×§×¨×™××”**: ×¨×§ ××©×ª××©×™× ××—×•×‘×¨×™×
- **×›×ª×™×‘×”**: ×¨×§ ×”××©×ª××© ×¢×¦××• ×™×›×•×œ ×œ×¢×“×›×Ÿ ××ª ×”×¤×¨×•×¤×™×œ ×©×œ×•

---

## ×©××œ×•×ª × ×¤×•×¦×•×ª

**×©: ×”×× ×¦×¨×™×š ×œ×¢×“×›×Ÿ ××ª ×”×§×•×“ ××—×¨×™ ×”×•×¡×¤×ª ×”××™× ×“×§×¡?**
×ª: ×œ×! ×”××™× ×“×§×¡ ×¤×•×¢×œ ××•×˜×•××˜×™×ª ×‘×¨×§×¢.

**×©: ××” ×§×•×¨×” ×× ×œ× ××•×¡×™×¤×™× ××™× ×“×§×¡?**
×ª: ×”××¢×¨×›×ª ×ª××©×™×š ×œ×¢×‘×•×“, ××‘×œ ×™×•×ª×¨ ×œ××˜ - Firebase ×ª×•×¨×™×“ ×™×•×ª×¨ × ×ª×•× ×™× ××”×©×¨×ª.

**×©: ×”×× ×™×© ×¢×œ×•×ª ×œ××™× ×“×§×¡×™×?**
×ª: ×œ×! ×”××™× ×“×§×¡×™× ×—×™× ××™×™× ×•××©×¤×¨×™× ×‘×™×¦×•×¢×™×.

---

ğŸ“… **×ª××¨×™×š ×™×¦×™×¨×”:** 15/11/2025
ğŸ”§ **×¢×“×›×•×Ÿ ××—×¨×•×Ÿ:** 15/11/2025
